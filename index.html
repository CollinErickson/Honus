<!doctype html>
<html lang="en">
<head>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-137788726-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-137788726-1');
	</script>

<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
  <meta charset="utf-8">
  <title>Honus</title>
    <!-- Load jQuery from Google's CDN -->
    <!-- Load jQuery UI CSS  -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    
    <!-- Load jQuery JS -->
    <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <!-- Load jQuery UI Main JS  -->
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    
    <!-- Load SCRIPT.JS which will create datepicker for input field  -->
    <script type="text/javascript"  src="./scripts/script.js"></script>
    
    <link rel="stylesheet" type="text/css"  href="./stylesheets/stylesheet.css" />
</head>



<body>

<table id="toptable"><tr>
	<td>
		<h3 align='center' style='color:magenta;cursor:pointer;padding-right:8px;' onclick='window.location.href="/"'>Honus<h1>
	</td>
	<td>
		Team:
	</td>
	<td>
		<select name="team" id="selectteam">
			<!-- <option value="ANA" >ANA</option><option value="ARI" >ARI</option><option value="ATL" >ATL</option><option value="BAL" >BAL</option> -->
			<!-- <option value="BOS" >BOS</option><option value="CHA" >CHA</option><option value="CHN" >CHN</option><option value="CIN" >CIN</option> -->
			<!-- <option value="CLE" >CLE</option><option value="COL" >COL</option><option value="DET" >DET</option><option value="HOU" >HOU</option> -->
			<!-- <option value="KCA" >KCA</option><option value="LAN" >LAN</option><option value="MIA" >MIA</option><option value="MIL" >MIL</option> -->
			<!-- <option value="MIN" selected="selected">MIN</option><option value="NYA" >NYA</option><option value="NYN" >NYN</option><option value="OAK" >OAK</option> -->
			<!-- <option value="PHI" >PHI</option><option value="PIT" >PIT</option><option value="SDN" >SDN</option><option value="SEA" >SEA</option> -->
			<!-- <option value="SFN" >SFN</option><option value="SLN" >SLN</option><option value="TBA" >TBA</option><option value="TEX" >TEX</option> -->
			<!-- <option value="TOR" >TOR</option><option value="WAS" >WAS</option> -->
			<option value="ARI" >ARI</option><option value="ATL" >ATL</option><option value="BAL" >BAL</option>
			<option value="BOS" >BOS</option><option value="CHC" >CHC</option><option value="CIN" >CIN</option>
			<option value="CLE" >CLE</option><option value="COL" >COL</option><option value="CWS" >CWS</option>
			<option value="DET" >DET</option><option value="HOU" >HOU</option><option value="KC"  >KC </option>
			<option value="LAA" >LAA</option><option value="LAD" >LAD</option><option value="MIA" >MIA</option>
			<option value="MIL" >MIL</option><option value="MIN" selected="selected">MIN</option><option value="NYM" >NYM</option>
			<option value="NYY" >NYY</option><option value="OAK" >OAK</option><option value="PHI" >PHI</option>
			<option value="PIT" >PIT</option><option value="SD"  >SD </option><option value="SEA" >SEA</option>
			<option value="SF"  >SF </option><option value="STL" >STL</option><option value="TB"  >TB </option>
			<option value="TEX" >TEX</option><option value="TOR" >TOR</option><option value="WSH" >WSH</option>
		</select>
	</td>
	<td>
		<table><tr>
			<td>Date:</td> 
			<td><input type="text" id="datepicker"> </td>
			<!--<td>&#8647; </td>
			<td>&#8592;</td>  -->
			<td class="datemovearrow" id="datemovearrowb2" onclick="" >&#10092;</td>
			<td class="datemovearrow" id="datemovearrowb1" onclick="" >&#10096;</td>
			<td class="datemovearrow" id="datemovearrowtoday" onclick="" >&#10074;</td>
			<td class="datemovearrow" id="datemovearrowf1" onclick="" >&#10097;</td>
			<td class="datemovearrow" id="datemovearrowf2" onclick="" >&#10093;</td>
			<td><button onclick='goToDatePicked()'> Go! </button></td>
			<td id="topbarteams"></td>
			<td id="toplinescore"></td>
			<td id="toplinelinks"><table><tr>
				<!-- Link to MLB.com -->
				<td style="padding-left:20px;"><a style="color:inherit;text-decoration:none;" target="_blank" href="http://mlb.mlb.com/home"><img src="https://www.mlb.com/favicon.ico" /></a></td>
				<td>
					<!-- Link to Standings -->
					<table><tr><td><a style="color:inherit;text-decoration:none;" target="_blank" href="http://mlb.mlb.com/mlb/standings/index.jsp">Standings</a></td></tr>
					<!-- Link to Gameday, need to update later -->
					<tr><td id="toplinelinksgameday"></td></tr></table>
				</td>
				<!-- Link to reddit.com/r/baseball -->
				<td><a href="https://www.reddit.com/r/baseball" target="_blank"><img src="https://www.reddit.com/favicon.ico" /></a></td>
				<td><a href="https://www.reddit.com/r/MLBStreams" target="_blank"><img src="https://www.reddit.com/favicon.ico" /></a></td>
				<!-- Link to streams, update later -->
				<td id="toplinelinksstreams"></td>
			</tr></table></td>
		</tr></table>
	</td>
	<td width="20px"></td>
	<td><h4>
		
	</h4></td>
	<td>
	</td>
<td><div class="slidecontainer">
Video width
  <input type="range" min="100" max="2000" value="1000" class="slider" id="videowidthslider">
</div></td>
</tr></table>
 


<table id="midtable"><tr style="vertical-align:top;">
<td id="scorestable_td">


</td>
<td>

<table>
	<tr>
		<td style="vertical-align:top; min-width:250px;"><table id="headlinestable">
			
		</table></td>
		<td style="vertical-align:top;">
			<video id="videoplayer" controls  > <!--onclick="this.paused ? this.play() : this.pause();">-->
					<source src="" type="video/mp4" width=0>
					Your browser does not support the video tag.
					</video>	
		</td>
	</tr>
</table>


</td>
</tr></table>

<table id ="selectedgamenowbatting">
</table>


<table id="scoringplaystable">
</table>

<table id="fullboxscoretable">
</table>


<div align="right">
	Suggestions, comments, questions? Email <a href="mailto:Honus1064@gmail.com" style="color:inherit;">Honus1064@gmail.com</a>
</div>

<!-- DATE PICKER -->
<script  type="text/javascript">
	// https://stackoverflow.com/questions/1531093/how-do-i-get-the-current-date-in-javascript
	var today = new Date();
	var dd = String(today.getDate()).padStart(2, '0');
	var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
	var yyyy = today.getFullYear();

	//  jQuery ready function. Specify a function to execute when the DOM is fully loaded. 
	$(document).ready(
	  // This is the function that will get executed after the DOM is fully loaded 
	  function () {//console.log("ready 0987520933");
		$( "#datepicker" ).datepicker({
		  changeMonth: true,//this option for allowing user to select month
		  changeYear: true //this option for allowing user to select from year range
		});
		var today = new Date();
		//$( "#datepicker" ).datepicker("setDate",(today.getMonth()+1)+"/"+today.getDate()+"/"+today.getFullYear());
		<!-- $( "#datepicker" ).datepicker("setDate", mm +"/"+ dd + "/"+yyyy); -->
		$( "#datepicker" ).datepicker("setDate", month +"/"+ day + "/"+ year);
	  }

	);

</script>


<script type="text/javascript"  >
	var rangeslider = document.getElementById("videowidthslider");
	rangeslider.oninput = function() {
	  console.log(this.value);
	  document.getElementById("videoplayer").width = this.value;
	}
</script>

<script type="text/javascript"  >

//var year = "2019";
//var month = "04";
//var day = "05";
var date_today = new Date();
var date_today_string = date_today.toISOString().split("T")[0];
// These use UTC and are off in US evening
//var year  = date_today_string.substr(0,4); //date_today.getFullYear();
//var month = date_today_string.substr(5,2); //date_today.getMonth()+1;
//var day   = date_today_string.substr(8,2); //date_today.getDay()+1;
//console.log($.datepicker.formatDate("mm dd yy", new Date()));
var year  = $.datepicker.formatDate("yy", new Date());
var month = $.datepicker.formatDate("mm", new Date());
var day   = $.datepicker.formatDate("dd", new Date());
var team = "NYY";
var selected_game = -1;
var game_pk = null;
//var away_code = null;
//var home_code = null;
//var dbh = "1";
document.getElementById("datepicker").value = month + "/" + day + "/" + year;

// Load favorite batters from localStorage
var favBatters = readInFavoriteBatters();

//console.log("Current URL is", window.location.href);
//var inURL = "https://collinerickson.github.io/HonusJS/?date=20180412&team=MIN";
var inURL = window.location.href;
var inURL2 = inURL.split("?")[1];
if (inURL2 && inURL2.length > 1) {
	inURL2.split("&").forEach(x => {
		x2 = x.split("=");
		if (x2.length > 1) {
			if (x2[0].toLowerCase() == "team") {
				team = x2[1].toUpperCase();
				//console.log("team given in URL, is", team);
			} else if (x2[0].toLowerCase() == "date") {
				var date = x2[1].replace(/\//g, '').replace(/-/g, '');
				if (date.length != 8) {
					//console.log("date is wrong length", date);
				} else {
					year  = date.substr(0,4);
					month = date.substr(4,2);
					day   = date.substr(6,2);
					//console.log("date given in URL, is", month, day, year);
				}
			}
		}
	})
}


runAllJS(year, month, day, team);
/*console.log("running my script");
// get master scoreboard
//const proxyurl = "https://cors-anywhere.herokuapp.com/";
const url = "http://gd2.mlb.com/components/game/mlb/year_2019/month_04/day_01/master_scoreboard.json"; // site that doesn’t send Access-Control-*
console.log('about to fetch', url);
//var fetchout = fetch(proxyurl + url)
var fetchout = get_JSON_as_object(url)
.then(response => response.text())
.catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
.then(contents => {console.log(contents); return contents;})
.then(response => {console.log("Here's the JSON", JSON.parse(response)); return JSON.parse(response);})
.catch(() => console.log("Error parsing"))
.then(x => {
console.log('x is', x.data.games.game);
for (var i=0; i < x.data.games.game.length; i++) {console.log("game" + i, x.data.games.game[i].linescore);};
return x;
})
.then( x => {

	setBoxScores(x);
	return x;
})
.then( x => {

	doAllHighlights();
	
	
	return x;
})
;*/

//console.log("fetchout is", fetchout);


  
</script>


</body>
</html>