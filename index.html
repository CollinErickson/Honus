<!doctype html>
<html lang="en">
<head>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-137788726-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-137788726-1');
	</script>

<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
  <meta charset="utf-8">
  <title>Honus</title>
    <!-- Load jQuery from Google's CDN -->
    <!-- Load jQuery UI CSS  -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    
    <!-- Load jQuery JS -->
    <!-- <script src="https://code.jquery.com/jquery-1.9.1.js"></script> -->
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <!-- Load jQuery UI Main JS  -->
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    
    <!-- Load SCRIPT.JS which will create datepicker for input field  -->
    <script type="text/javascript"  src="./scripts/script.js"></script>
	
	<!-- X2JS to convert XML and JSON either way -->
	<!-- <script type='text/javascript' src="./scripts/xml2json.js"></script> -->
    
    <link rel="stylesheet" type="text/css"  href="./stylesheets/stylesheet.css" />
</head>



<body id="body" onclick="last_user_click_time=new Date(); setUserInactivityTimer();">

<table id="toptable"><tr>
	<td>
		<h3 align='center' style='color:magenta;cursor:pointer;padding-right:8px;' onclick='window.location.href="/Honus/"'>Honus</h3>
	</td>
	<td> <!--&#x21bb; <strong>&#x21bb;</strong> &#x27f3; &#x1f504; -->
		<span class='pointeronhover' id='reloadrateicon' onclick='runAllJS(year, month, day, team)'>&#x21bb;</span>
		<select name="" id="selectreload" onchange='update_refresh_rate()'>
			<option value="never">-</option>
			<!-- <option value="3">3s</option> -->
			<option value="15">15s</option>
			<option value="30">30s</option>
			<option value="60">1m</option>
			<option value="120">2m</option>
			<option value="300">5m</option>
		</select>
	</td>
	<td>
		Team:
	</td>
	<td>
		<select name="team" id="selectteam" onchange='console.log("Changed team!!!!");localStorage.setItem("team",document.getElementById("selectteam").value);'>
			<!-- <option value="ANA" >ANA</option><option value="ARI" >ARI</option><option value="ATL" >ATL</option><option value="BAL" >BAL</option> -->
			<!-- <option value="BOS" >BOS</option><option value="CHA" >CHA</option><option value="CHN" >CHN</option><option value="CIN" >CIN</option> -->
			<!-- <option value="CLE" >CLE</option><option value="COL" >COL</option><option value="DET" >DET</option><option value="HOU" >HOU</option> -->
			<!-- <option value="KCA" >KCA</option><option value="LAN" >LAN</option><option value="MIA" >MIA</option><option value="MIL" >MIL</option> -->
			<!-- <option value="MIN" selected="selected">MIN</option><option value="NYA" >NYA</option><option value="NYN" >NYN</option><option value="OAK" >OAK</option> -->
			<!-- <option value="PHI" >PHI</option><option value="PIT" >PIT</option><option value="SDN" >SDN</option><option value="SEA" >SEA</option> -->
			<!-- <option value="SFN" >SFN</option><option value="SLN" >SLN</option><option value="TBA" >TBA</option><option value="TEX" >TEX</option> -->
			<!-- <option value="TOR" >TOR</option><option value="WAS" >WAS</option> -->
			<option value="ARI" >ARI</option><option value="ATL" >ATL</option><option value="BAL" >BAL</option>
			<option value="BOS" >BOS</option><option value="CHC" >CHC</option><option value="CIN" >CIN</option>
			<option value="CLE" >CLE</option><option value="COL" >COL</option><option value="CWS" >CWS</option>
			<option value="DET" >DET</option><option value="HOU" >HOU</option><option value="KC"  >KC </option>
			<option value="LAA" >LAA</option><option value="LAD" >LAD</option><option value="MIA" >MIA</option>
			<option value="MIL" >MIL</option><option value="MIN" selected="selected">MIN</option><option value="NYM" >NYM</option>
			<option value="NYY" >NYY</option><option value="OAK" >OAK</option><option value="PHI" >PHI</option>
			<option value="PIT" >PIT</option><option value="SD"  >SD </option><option value="SEA" >SEA</option>
			<option value="SF"  >SF </option><option value="STL" >STL</option><option value="TB"  >TB </option>
			<option value="TEX" >TEX</option><option value="TOR" >TOR</option><option value="WSH" >WSH</option>
		</select>
	</td>
	<td>
		<table><tr>
			<td>Date:</td> 
			<td id="datepickertd"><input type="text" id="datepicker"> </td>
			<!--<td>&#8647; </td>
			<td>&#8592;</td>  -->
			<td class="datemovearrow" id="datemovearrowb2" onclick="" >&#10092;</td>
			<td class="datemovearrow" id="datemovearrowb1" onclick="" >&#10096;</td>
			<td class="datemovearrow" id="datemovearrowtoday" onclick="" >&#10074;</td>
			<td class="datemovearrow" id="datemovearrowf1" onclick="" >&#10097;</td>
			<td class="datemovearrow" id="datemovearrowf2" onclick="" >&#10093;</td>
			<td><button onclick='goToDatePicked()'> Go! </button></td>
			<td id="topbarteams"></td>
			<td id="toplinescore"></td>
			<td id="toplinelinks"><table><tr>
				<!-- Link to MLB.com -->
				<td style="padding-left:20px;"><a style="color:inherit;text-decoration:none;" target="_blank" href="http://mlb.mlb.com/home"><img src="https://www.mlb.com/favicon.ico" /></a></td>
				<td>
					<!-- Link to Standings -->
					<table><tr><td><a style="color:inherit;text-decoration:none;" target="_blank" href="http://mlb.mlb.com/mlb/standings/index.jsp">Standings</a></td></tr>
					<!-- Link to Gameday, need to update later -->
					<tr><td id="toplinelinksgameday"></td></tr></table>
				</td>
				<!-- Link to reddit.com/r/baseball -->
				<td><a href="https://www.reddit.com/r/baseball" target="_blank"><img src="https://www.reddit.com/favicon.ico" /></a></td>
				<td><a href="https://www.reddit.com/r/MLBStreams" target="_blank"><img src="https://www.reddit.com/favicon.ico" /></a></td>
				<!-- Link to streams, update later -->
				<td id="toplinelinksstreams"></td>
			</tr></table></td>
		</tr></table>
	</td>
	<td width="20px"></td>
	<td><h4>
		
	</h4></td>
	<td>
	</td>
<td><div class="slidecontainer">
Video width
  <input type="range" min="100" max="2000" value="1000" class="slider" id="videowidthslider">
</div></td>
</tr></table>
 

<!-- midtable has gamescores on left and highlights on right -->
<table id="midtable"><tr style="vertical-align:top;">

<!-- td for scorestable, will be filled in later -->
<td id="scorestable_td">
</td>

<!-- td for highlights/win prob/news -->
<td>

<!-- Tab links -->
<div class="tab" align="center" style="height:18px">
  <button class="tablinks" id="highlightsbutton"      onclick="openTab(event, 'highlightstab')"  >Highlights</button>
  <button class="tablinks" id="fullboxscorebutton"    onclick="openTab(event, 'fullboxscoretab')">Box score</button>
  <!-- <button class="tablinks" id="scoringplaysbutton" onclick="openTab(event, 'scoringplaystab')">Scoring plays</button> -->
  <button class="tablinks" id="playsbutton"           onclick="openTab(event, 'playstab')"       >Plays</button>
  <button class="tablinks" id="winprobbutton"         onclick="openTab(event, 'winprobtab')"     >Win probability</button>
  <button class="tablinks" id="newsbutton"            onclick="openTab(event, 'newstab')"        >News</button>
  <button class="tablinks" id="standingsbutton"       onclick="openTab(event, 'standingstab')"   >Standings</button>
  <button class="tablinks" id="favhittersbutton"      onclick="openTab(event, 'favhitterstab')"  >Favorite Hitters</button>
  <button class="tablinks" id="favpitchersbutton"     onclick="openTab(event, 'favpitcherstab')" >Favorite Pitchers</button>
  <button class="tablinks" id="livebutton"            onclick="openTab(event, 'livetab')"        >Live (WIP)</button>
</div>

<!-- highlights tab -->
<div id="highlightstab" class="tabcontent">
	<table>
		<tr>
			<td style="vertical-align:top; min-width:250px;"><table id="headlinestable">
				
			</table></td>
			<td style="vertical-align:top;">
				<video id="videoplayer" controls  > <!--onclick="this.paused ? this.play() : this.pause();">-->
						<source src="" type="video/mp4" width=0>
						Your browser does not support the video tag.
						</video>	
			</td>
		</tr>
	</table>
</div>



<div id="fullboxscoretab" class="tabcontent">
	<div id="fullboxscoretabdiv">
	</div>
</div>

<!-- <div id="scoringplaystab" class="tabcontent"> -->
	<!-- <div id="scoringplaystabdiv"> -->
	<!-- </div> -->
<!-- </div> -->

<div id="playstab" class="tabcontent">
	<div id="playstabdiv">
	<!-- <table><tr> -->
	<!-- <td>plays selector -->
		
		<div class="tab" align="center" style="height:18px">
		  <button class="playstablinks" id="playstabbuttonscoring" onclick="openPlays(event, 'playstabscoring')">Scoring</button>
		  <div id="playstabinningbuttons">
			  <!-- <button class="playstablinks" id="playstabbutton1" onclick="openPlays(event, 'playstabsinning1')">1</button> -->
			  <!-- <button class="playstablinks" id="playstabbutton1" onclick="openPlays(event, 'playstabsinning1')">2</button> -->
		  </div>
		  
		</div>
		
		
		<div id="playstabscoring" class="playstabcontent">
			<div id="playstabdivscoringdiv"> Loading...
			</div>
		</div>
		
		<div id="playstabsinnings" class="playstabcontentallinnings">
			<!-- <div id="playstabdivinning1div"> Inning 1 -->
			<!-- </div> -->
		</div>
	<!-- </td> -->
	<!-- <td>plays in here</td> -->
	<!-- </tr></table> -->
	</div>
</div>

<div id="winprobtab" class="tabcontent">
	<div id="fangraphsWinProbDiv">
	</div>
</div>


<div id="newstab" class="tabcontent" width="800px">
	<table><tr>
	<td id="newstabtwitterfeed">
	<!-- Tab 1 -->
	<!-- <a id="newstabtwitterfeed" class="twitter-timeline" width="520" data-width="520" data-height="600" data-theme="dark" href="https://twitter.com/collin_e/lists/mlb?ref_src=twsrc%5Etfw">An MLB Twitter List</a> -->
	<!-- <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->
	</td>
	
	<td id="bloopleFGtd" class="bloopletd">	
		<div id="bloopleFGdiv" class="blooplediv">
		<script src="https://rss.bloople.net/?url=https%3A%2F%2Fblogs.fangraphs.com%2Ffeed%2F&detail=-1&limit=50&type=js"></script>
		</div>
	</td>
	
	
	<td id="blooplemlbtd" class="bloopletd">	
		<div id="bloopleMLBdiv" class="blooplediv">
		<script src="https://rss.bloople.net/?url=https%3A%2F%2Fwww.mlb.com%2Ffeeds%2Fnews%2Frss.xml&detail=-1&limit=50&type=js"></script>
		</div>
	</td>
	
	

	<td>
	<!-- Not https, won't work on site -->
	<!-- <div id="widgetmain" style="text-align:left;overflow-y:auto;overflow-x:hidden;width:400px;background-color:#transparent; border:1px solid #333333;"><div id="rsswidget" style="height:500px;"><iframe src="https://us1.rssfeedwidget.com/getrss.php?time=1555030751077&amp;x=https%3A%2F%2Fblogs.fangraphs.com%2Ffeed%2F&amp;w=400&amp;h=500&amp;bc=333333&amp;bw=1&amp;bgc=transparent&amp;m=20&amp;it=true&amp;t=(default)&amp;tc=63FFF5&amp;ts=24&amp;tb=transparent&amp;il=true&amp;lc=D9EFE9&amp;ls=17&amp;lb=false&amp;id=true&amp;dc=DEFCE2&amp;ds=14&amp;idt=false&amp;dtc=284F2D&amp;dts=12" border="0" hspace="0" vspace="0" frameborder="no" marginwidth="0" marginheight="0" style="border:0; padding:0; margin:0; width:400px; height:500px;" id="rssOutput">Reading RSS Feed ...</iframe></div><div style="text-align:right;margin-bottom:0;border-top:1px solid #333333;" id="widgetbottom"><span style="font-size:70%"><a href="https://www.rssfeedwidget.com">rss feed widget</a>&nbsp;</span><br></div></div> -->
	<!-- <div id="widgetmain" style="text-align:left;overflow-y:auto;overflow-x:hidden;width:400px;background-color:#transparent; border:1px solid #333333;"> -->
	<!-- <div id="rsswidget" style="height:500px;"> -->
	<!-- <iframe src="http://us1.rssfeedwidget.com/getrss.php?time=1554929231771&amp;x=http%3A%2F%2Fblogs.fangraphs.com%2Ffeed%2F&amp;w=400&amp;h=500&amp;bc=333333&amp;bw=1&amp;bgc=transparent&amp;m=20&amp;it=true&amp;t=(default)&amp;tc=FFFFFF&amp;ts=17&amp;tb=transparent&amp;il=true&amp;lc=91DAFF&amp;ls=14&amp;lb=false&amp;id=true&amp;dc=EDCD4E&amp;ds=14&amp;idt=true&amp;dtc=A9FCA7&amp;dts=12" border="0" hspace="0" vspace="0" frameborder="no" marginwidth="0" marginheight="0" style="border:0; padding:0; margin:0; width:400px; height:500px;" id="rssOutput">Reading RSS Feed ...</iframe> -->
	<!-- </div> -->
	<!-- <div style="text-align:right;margin-bottom:0;border-top:1px solid #333333;" id="widgetbottom"> -->
	<!-- <span style="font-size:70%"> -->
	<!-- <a href="http://www.rssfeedwidget.com">rss feed widget</a>&nbsp;</span><br></div></div> -->
	</td>

	<td>
	<!-- <div id="widgetmain" style="text-align:left;overflow-y:auto;overflow-x:hidden;width:400px;background-color:#transparent; border:1px solid #333333;"><div id="rsswidget" style="height:500px;"><iframe src="http://us1.rssfeedwidget.com/getrss.php?time=1554929845891&amp;x=https%3A%2F%2Fwww.mlb.com%2Ffeeds%2Fnews%2Frss.xml&amp;w=400&amp;h=500&amp;bc=333333&amp;bw=1&amp;bgc=transparent&amp;m=20&amp;it=true&amp;t=(default)&amp;tc=FFFFFF&amp;ts=17&amp;tb=transparent&amp;il=true&amp;lc=91DAFF&amp;ls=14&amp;lb=false&amp;id=true&amp;dc=EDCD4E&amp;ds=14&amp;idt=true&amp;dtc=A9FCA7&amp;dts=12" border="0" hspace="0" vspace="0" frameborder="no" marginwidth="0" marginheight="0" style="border:0; padding:0; margin:0; width:400px; height:500px;" id="rssOutput">Reading RSS Feed ...</iframe></div><div style="text-align:right;margin-bottom:0;border-top:1px solid #333333;" id="widgetbottom"><span style="font-size:70%"><a href="http://www.rssfeedwidget.com">rss feed widget</a>&nbsp;</span><br></div></div> -->
	<!-- Not http, can't use in site -->
	<!-- <div id="widgetmain" style="text-align:left;overflow-y:auto;overflow-x:hidden;width:400px;background-color:#transparent; border:1px solid #333333;"><div id="rsswidget" style="height:500px;"><iframe src="https://us1.rssfeedwidget.com/getrss.php?time=1555030578845&amp;x=https%3A%2F%2Fwww.mlb.com%2Ffeeds%2Fnews%2Frss.xml&amp;w=400&amp;h=500&amp;bc=333333&amp;bw=1&amp;bgc=transparent&amp;m=20&amp;it=true&amp;t=(default)&amp;tc=63FFF5&amp;ts=24&amp;tb=transparent&amp;il=true&amp;lc=D9EFE9&amp;ls=17&amp;lb=false&amp;id=false&amp;dc=333333&amp;ds=14&amp;idt=false&amp;dtc=284F2D&amp;dts=12" border="0" hspace="0" vspace="0" frameborder="no" marginwidth="0" marginheight="0" style="border:0; padding:0; margin:0; width:400px; height:500px;" id="rssOutput">Reading RSS Feed ...</iframe></div><div style="text-align:right;margin-bottom:0;border-top:1px solid #333333;" id="widgetbottom"><span style="font-size:70%"><a href="https://www.rssfeedwidget.com">rss feed widget</a>&nbsp;</span><br></div></div> -->
	</td>

	<!-- <td> -->
	<!-- <script type="text/javascript" language="javascript" src="https://www.rssdog.com/index.php?url=https%3A%2F%2Fwww.mlb.com%2Ffeeds%2Fnews%2Frss.xml&amp;mode=javascript&amp;showonly=&amp;maxitems=100&amp;showdescs=1&amp;desctrim=140&amp;descmax=180&amp;tabwidth=100%25&amp;linktarget=_blank&amp;textsize=inherit&amp;bordercol=%23d4d0c8&amp;headbgcol=&amp;headtxtcol=%23000000&amp;titlebgcol=%23&amp;titletxtcol=%2391DAFF&amp;itembgcol=%23&amp;itemtxtcol=%23EDCD4E&amp;ctl=0"> -->
	<!-- </td> -->

	<!-- <td> -->
	<!-- <script type="text/javascript" language="javascript" src="https://www.rssdog.com/index.php?url=http%3A%2F%2Fblogs.fangraphs.com%2Ffeed%2F&amp;mode=javascript&amp;showonly=&amp;maxitems=100&amp;showdescs=1&amp;desctrim=0&amp;descmax=0&amp;tabwidth=100%25&amp;linktarget=_blank&amp;textsize=inherit&amp;bordercol=%23d4d0c8&amp;headbgcol=%22transparent%22&amp;headtxtcol=%2391DAFF&amp;titlebgcol=%23%22transparent%22&amp;titletxtcol=%23EDCD4E&amp;itembgcol=%23%22transparent%22&amp;itemtxtcol=%23A9FCA7&amp;ctl=0"> -->
	<!-- </td> -->

	<!-- <a class="twitter-timeline" data-width="1000" data-height="600" href="https://twitter.com/collin_e/lists/mlb?ref_src=twsrc%5Etfw">A Twitter List by collin_e</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->

	<!-- <a width="750" class="twitter-timeline" data-theme="dark" href="https://twitter.com/collin_e/lists/mlb?ref_src=twsrc%5Etfw">A Twitter List by collin_e</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->

	</tr></table>
</div>


<div id="standingstab" class="tabcontent">
	<div id="standingsdiv">
	Standings
	</div>
</div>


<div id="favhitterstab" class="tabcontent">
	<div id="favhittersdiv">
	Not loaded yet
	</div>
</div>
<div id="favpitcherstab" class="tabcontent">
	<div id="favpitchersdiv">
	Not loaded yet
	</div>
</div>

<div id="livetab" class="tabcontent">
	<div id="livediv">
	Game is not live
	</div>
</div>

</td>
</tr></table>

<table id ="selectedgamenowbatting">
</table>


<table id="scoringplaystable" style="margin-top:10px">
</table>

<table id="fullboxscoretable" style="margin-top:10px">
</table>

<div id="favBattersdiv">
</div>



<!-- <div width="520px" id="twitterlistdiv"> -->
<!-- <a id="twitterlist" class="twitter-timeline" width="520px" data-width="520px" data-height="800" data-theme="dark" href="https://twitter.com/collin_e/lists/mlb?ref_src=twsrc%5Etfw">An MLB Twitter List</a> -->
<!-- <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->
<!-- </div> -->

<!-- <div> -->
<!-- <a class="twitter-timeline" data-height="500" data-theme="dark" href="https://twitter.com/collin_e/lists/mlb?ref_src=twsrc%5Etfw">A Twitter List by collin_e</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->
<!-- </div> -->


<div align="right">
	Suggestions, comments, questions? Email <a href="mailto:Honus1064@gmail.com" style="color:inherit;">Honus1064@gmail.com</a>
</div>

<!-- DATE PICKER -->
<script  type="text/javascript">
	// https://stackoverflow.com/questions/1531093/how-do-i-get-the-current-date-in-javascript
	var today = new Date();
	var dd = String(today.getDate()).padStart(2, '0');
	var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
	var yyyy = today.getFullYear();

	//  jQuery ready function. Specify a function to execute when the DOM is fully loaded. 
	$(document).ready(
	  // This is the function that will get executed after the DOM is fully loaded 
	  function () {//console.log("ready 0987520933");
		$( "#datepicker" ).datepicker({
		  changeMonth: true,//this option for allowing user to select month
		  changeYear: true //this option for allowing user to select from year range
		});
		var today = new Date();
		//$( "#datepicker" ).datepicker("setDate",(today.getMonth()+1)+"/"+today.getDate()+"/"+today.getFullYear());
		<!-- $( "#datepicker" ).datepicker("setDate", mm +"/"+ dd + "/"+yyyy); -->
		$( "#datepicker" ).datepicker("setDate", month +"/"+ day + "/"+ year);
		
		// datepicker was too wide, changing width here, not sure if it's good idea
		$("#datepicker").width("5.5em")
	  }

	);

</script>


<script type="text/javascript"  >
	var rangeslider = document.getElementById("videowidthslider");
	rangeslider.oninput = function() {
		//console.log(this.value);
		document.getElementById("videoplayer").width = this.value;
		localStorage.setItem("videowidth", this.value);
	}
</script>

<script type="text/javascript"  >

//var year = "2019";
//var month = "04";
//var day = "05";
var date_today = new Date();
var date_today_string = date_today.toISOString().split("T")[0];
// These use UTC and are off in US evening
//var year  = date_today_string.substr(0,4); //date_today.getFullYear();
//var month = date_today_string.substr(5,2); //date_today.getMonth()+1;
//var day   = date_today_string.substr(8,2); //date_today.getDay()+1;
//console.log($.datepicker.formatDate("mm dd yy", new Date()));
var year  = $.datepicker.formatDate("yy", new Date());
var month = $.datepicker.formatDate("mm", new Date());
var day   = $.datepicker.formatDate("dd", new Date());
var team = "NYY";
if (localStorage.getItem("team")) {
	team = localStorage.getItem("team");
}
var selected_game = -1;
var game_nbr = "1"; // For doubleheaders, either "1" or "2"
var game_pk = null;
var last_selected_game_pk = null;
var master_scoreboard_last_updated = null;
var highlights_last_updated = null;
var highlights_last_updated_selected_game_pk = -1;
var last_user_click_time = new Date();
var user_inactivity_timer_id = null;
var stream_service = "MLB.tv";
if (localStorage.getItem("stream_service")) {
	stream_service = localStorage.getItem("stream_service");
}
var stream_service_exceptions = {};
if (localStorage.getItem("stream_service_exceptions")) {
	stream_service_exceptions = JSON.parse(localStorage.getItem("stream_service_exceptions"));
}
//var reload_rate = document.getElementById("selectreload").value;
if (localStorage.getItem("reload_rate")) {
	document.getElementById("selectreload").value = localStorage.getItem("reload_rate");
}
var refresh_setInterval_id;

// Get videowidth from local Storage
if (localStorage.getItem("videowidth")) {
	document.getElementById("videowidthslider").value = localStorage.getItem("videowidth");
}
var highlight_videos_already_seen = [];

// Start on highlights tab
document.getElementById('highlightsbutton').click()

//var away_code = null;
//var home_code = null;
//var dbh = "1";
document.getElementById("datepicker").value = month + "/" + day + "/" + year;

//var use_favBatters = true;
//var use_notifications = use_favBatters;
var use_favBatters = localStorage.getItem("use_favBatters");
if (use_favBatters == null) {
	use_favBatters = true;
} else if (use_favBatters == "true") {
	use_favBatters = true;
} else if (use_favBatters == "false") {
	use_favBatters = false;
} else {
	console.log("BIG ERROR restoring use_favBatters");
}
var use_notifications = use_favBatters;

// Load favorite batters from localStorage
try {
	var favBatters = readInFavoriteBatters();
	var	favBattersIds = getFavoriteBattersIds();
	var favBattersUseNotifications = readInFavoriteBattersUseNotification(); // Should notifications be used for each individual fav batter?
	var favBatters_last_notification = {};
	favBattersIds.forEach( id => {favBatters_last_notification[id] = null});
}
catch(err) {
	console.log("Can't run readInFavoriteBatters, clear your cache and try again");
	var favBatters = [];
	var	favBattersIds = [];
	var favBattersUseNotifications = {};
	var favBatters_last_notification = {};
}

//console.log("Current URL is", window.location.href);
//var inURL = "https://collinerickson.github.io/HonusJS/?date=20180412&team=MIN";
var inURL = window.location.href;
var inURL2 = inURL.split("?")[1];
if (inURL2 && inURL2.length > 1) {
	inURL2.split("&").forEach(x => {
		x2 = x.split("=");
		if (x2.length > 1) {
			if (x2[0].toLowerCase() == "team") {
				team = x2[1].toUpperCase();
				//console.log("team given in URL, is", team);
			} else if (x2[0].toLowerCase() == "date") {
				var date = x2[1].replace(/\//g, '').replace(/-/g, '');
				if (date.length != 8) {
					//console.log("date is wrong length", date);
				} else {
					year  = date.substr(0,4);
					month = date.substr(4,2);
					day   = date.substr(6,2);
					//console.log("date given in URL, is", month, day, year);
				}
			}
		}
	})
}


runAllJS(year, month, day, team);
/*console.log("running my script");
// get master scoreboard
//const proxyurl = "https://cors-anywhere.herokuapp.com/";
const url = "http://gd2.mlb.com/components/game/mlb/year_2019/month_04/day_01/master_scoreboard.json"; // site that doesn’t send Access-Control-*
console.log('about to fetch', url);
//var fetchout = fetch(proxyurl + url)
var fetchout = get_JSON_as_object(url)
.then(response => response.text())
.catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
.then(contents => {console.log(contents); return contents;})
.then(response => {console.log("Here's the JSON", JSON.parse(response)); return JSON.parse(response);})
.catch(() => console.log("Error parsing"))
.then(x => {
console.log('x is', x.data.games.game);
for (var i=0; i < x.data.games.game.length; i++) {console.log("game" + i, x.data.games.game[i].linescore);};
return x;
})
.then( x => {

	setBoxScores(x);
	return x;
})
.then( x => {

	doAllHighlights();
	
	
	return x;
})
;*/

//console.log("fetchout is", fetchout);


  
</script>


</body>
</html>